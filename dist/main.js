(()=>{"use strict";function*e(){for(let e=0;e<d.length;e++)for(let t=0;t<d[e].length;t++)yield[d[e][t],e,t]}function t(){return Math.round(Math.random())}function n(){!function(t){for(const[n,r,o]of e())n.checked=!!t[r][o]}(function(){let t=Array(d.length).fill(0).map((e=>Array(d[e].length).fill(0)));for(const[n,o,c]of e()){let e=r(n);n.checked?t[o][c]=3==e||4==e?1:0:t[o][c]=3==e?1:0}return t}()),o.innerText=o.innerText.replace(/\d+/,(e=>+e+1))}function r(e){const[t,n]=function(e){return e.id.split(":").map(Number)}(e),r=n-1<0?n:n-1;let o=d[t-1]?d[t-1].slice(r,n+2):[],c=d[t].slice(r,n+2),i=d[t+1]?d[t+1].slice(r,n+2):[];return o.concat(c,i).reduce(((e,t)=>e+(1==t.checked?1:0)),0)}const o=document.querySelector("#generation");function c(){const e=document.querySelector("#start"),t=e.children[0];e.dataset.start="false"===e.dataset.start?"true":"false",t.innerText="play_arrow"==t.innerText?"pause":"play_arrow","true"===e.dataset.start&&async function(){const e=document.querySelector("#start");for(;"true"==e.dataset.start;)n(),await t(333);function t(e){return new Promise((t=>setTimeout(t,e)))}}()}function i(){a();for(const[t]of e())t.checked=!1}function a(){const e=document.querySelector("#start");e.dataset.start="false",e.children[0].innerText="play_arrow",document.querySelector("#generation").innerText="generation: 0"}function u(){a();for(const[n]of e())n.checked=!!t()}function l(){const e=document.querySelector("#p1").style,t=document.querySelector("#p2").style,n=document.querySelector("#how-to-button").style;"1000px"==e.maxHeight?[e.maxHeight,t.maxHeight]=["0px","0px"]:[e.maxHeight,t.maxHeight]=["1000px","1000px"],n.transform="rotate(0deg)"==n.transform?"rotate(-180deg)":"rotate(0deg)"}let d,s;function f(){const[e,t]=[Math.floor((visualViewport.height-200)/30),Math.floor((visualViewport.width-54)/30)];!function(e,t){const n=document.querySelector("#grid");a(),document.querySelector("#grid").innerHTML="";for(let r=0;r<e;r++)n.appendChild(m(t,r));d=Array.from(document.querySelector("#grid").children).map((e=>Array.from(e.children)))}(Math.min(e,23),Math.min(t,27))}function m(e,t){let n=document.createElement("div");n.classList="row",n.id=`r-${t}`;for(let r=0;r<e;r++)n.appendChild(h(`${t}:${r}`));return n}function h(e){let n=document.createElement("input");return n.type="checkbox",n.classList="cell",n.id=e,n.checked=!!t(),n}void 0===window.orientation&&-1===navigator.userAgent.indexOf("IEMobile")&&window.addEventListener("resize",(function(){clearTimeout(s),s=setTimeout(f,100)})),f(),function(){document.querySelector("#start").addEventListener("click",c),document.querySelector("#next").addEventListener("click",n),document.querySelector("#clear").addEventListener("click",i),document.querySelector("#reset").addEventListener("click",u);const e=document.querySelector("#how-to-button");e.style.transform="rotate(0deg)",e.addEventListener("click",l)}()})();